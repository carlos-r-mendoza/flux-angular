!function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?h(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Cursor",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"MonkeyDefinition",{enumerable:!0,get:function(){return v.MonkeyDefinition}}),Object.defineProperty(r,"Monkey",{enumerable:!0,get:function(){return v.Monkey}}),Object.defineProperty(r,"type",{enumerable:!0,get:function(){return g.default}}),r.helpers=r.default=r.VERSION=r.dynamic=r.monkey=void 0;var p=o(e("emmett")),y=o(e("./cursor")),v=e("./monkey"),m=o(e("./watcher")),g=o(e("./type")),b=o(e("./update")),w=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(e("./helpers"));r.helpers=w;var _=w.arrayFrom,k=w.coercePath,j=w.deepFreeze,P=w.getIn,O=w.makeError,E=w.deepClone,x=w.deepMerge,S=w.shallowClone,M=w.shallowMerge,A=w.hashPath,C={autoCommit:!0,asynchronous:!0,immutable:!0,lazyMonkeys:!0,monkeyBusiness:!0,persistent:!0,pure:!0,validate:null,validationBehavior:"rollback"},D=function(e){function t(e,r){var n;if(a(this,t),n=c(this,l(t).call(this)),arguments.length<1&&(e={}),!g.default.object(e)&&!g.default.array(e))throw O("Baobab: invalid data.",{data:e});n.options=M({},C,r),n.options.persistent||(n.options.immutable=!1,n.options.pure=!1),n._identity="[object Baobab]",n._cursors={},n._future=null,n._transaction=[],n._affectedPathsIndex={},n._monkeys={},n._previousData=null,n._data=e,n.root=new y.default(h(n),[],"λ"),delete n.root.release,n.options.immutable&&j(n._data),["apply","clone","concat","deepClone","deepMerge","exists","get","push","merge","pop","project","serialize","set","shift","splice","unset","unshift"].forEach(function(e){n[e]=function(){var t=this.root[e].apply(this.root,arguments);return t instanceof y.default?this:t}}),n.options.monkeyBusiness&&n._refreshMonkeys();var o=n.validate();if(o)throw Error("Baobab: invalid data.",{error:o});return n}return f(t,e),u(t,[{key:"_refreshMonkeys",value:function(e,t,r){var n=this,o=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t instanceof v.MonkeyDefinition||t instanceof v.Monkey){var o=new v.Monkey(n,r,t instanceof v.Monkey?t.definition:t);return void(0,b.default)(n._monkeys,r,{type:"set",value:o},{immutable:!1,persistent:!1,pure:!1})}if(g.default.object(t))for(var i in t)e(t[i],r.concat(i))};if(arguments.length){var i=P(this._monkeys,t).data;i&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t instanceof v.Monkey)return t.release(),void(0,b.default)(n._monkeys,r,{type:"unset"},{immutable:!1,persistent:!1,pure:!1});if(g.default.object(t))for(var o in t)e(t[o],r.concat(o))}(i,t),"unset"!==r&&o(e,t)}else o(this._data);return this}},{key:"validate",value:function(e){var t=this.options,r=t.validate,n=t.validationBehavior;if("function"!=typeof r)return null;var o=r.call(this,this._previousData,this._data,e||[[]]);return o instanceof Error?("rollback"===n&&(this._data=this._previousData,this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data),this.emit("invalid",{error:o}),o):null}},{key:"select",value:function(e){if(e=e||[],arguments.length>1&&(e=_(arguments)),!g.default.path(e))throw O("Baobab.select: invalid path.",{path:e});e=[].concat(e);var t=A(e),r=this._cursors[t];return r||(r=new y.default(this,e,t),this._cursors[t]=r),this.emit("select",{path:e,cursor:r}),r}},{key:"update",value:function(e,t){var r=this;if(e=k(e),!g.default.operationType(t.type))throw O('Baobab.update: unknown operation type "'.concat(t.type,'".'),{operation:t});var n=P(this._data,e),o=n.solvedPath,i=n.exists;if(!o)throw O("Baobab.update: could not solve the given path.",{path:o});var a=g.default.monkeyPath(this._monkeys,o);if(a&&o.length>a.length)throw O("Baobab.update: attempting to update a read-only path.",{path:o});if("unset"!==t.type||i){var s=t;if(/merge/i.test(t.type)){var u=P(this._monkeys,o).data;if(g.default.object(u)){s=S(s);var c=P(this._data,o).data;/deep/i.test(s.type)?s.value=x({},x({},c,E(u)),s.value):s.value=M({},x({},c,E(u)),s.value)}}this._transaction.length||(this._previousData=this._data);var l=(0,b.default)(this._data,o,s,this.options),h=l.data,f=l.node;if(!("data"in l))return f;var d=o.concat("push"===t.type?f.length-1:[]),p=A(d);return this._data=h,(this._affectedPathsIndex[p]=!0,this._transaction.push(M({},t,{path:d})),this.options.monkeyBusiness&&this._refreshMonkeys(f,o,t.type),this.emit("write",{path:d}),this.options.autoCommit)?this.options.asynchronous?(this._future||(this._future=setTimeout(function(){return r.commit()},0)),f):(this.commit(),f):f}}},{key:"commit",value:function(){if(!this._transaction.length)return this;this._future&&(this._future=clearTimeout(this._future));var e=Object.keys(this._affectedPathsIndex).map(function(e){return"λ"!==e?e.split("λ").slice(1):[]});if(this.validate(e))return this;var t=this._transaction,r=this._previousData;return this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this.emit("update",{paths:e,currentData:this._data,transaction:t,previousData:r}),this}},{key:"getMonkey",value:function(e){e=k(e);var t=P(this._monkeys,[].concat(e)).data;return t instanceof v.Monkey?t:null}},{key:"watch",value:function(e){return new m.default(this,e)}},{key:"release",value:function(){var e;this.emit("release"),delete this.root,delete this._data,delete this._previousData,delete this._transaction,delete this._affectedPathsIndex,delete this._monkeys;for(e in this._cursors)this._cursors[e].release();delete this._cursors,this.kill()}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),t}(p.default);D.monkey=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)throw new Error("Baobab.monkey: missing definition.");return 1===t.length&&"function"!=typeof t[0]?new v.MonkeyDefinition(t[0]):new v.MonkeyDefinition(t)},D.dynamicNode=D.monkey;var N=D.monkey;r.monkey=N;var I=D.dynamic;r.dynamic=I,D.VERSION="2.6.0";var B=D.VERSION;r.VERSION=B;var z=D;r.default=z;for(var F in r)D[F]=r[F];t.exports=D},{"./cursor":2,"./helpers":3,"./monkey":4,"./type":5,"./update":6,"./watcher":7,emmett:14}],2:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!t)throw(0,g.makeError)("Baobab.Cursor.".concat(e,": ")+"cannot use ".concat(e," on an unresolved dynamic path."),{path:t})}function p(e,t){b.prototype[e]=function(r,n){if(arguments.length>2)throw(0,g.makeError)("Baobab.Cursor.".concat(e,": too many arguments."));if(1!==arguments.length||w[e]||(n=r,r=[]),r=(0,g.coercePath)(r),!m.default.path(r))throw(0,g.makeError)("Baobab.Cursor.".concat(e,": invalid path."),{path:r});if(t&&!t(n))throw(0,g.makeError)("Baobab.Cursor.".concat(e,": invalid value."),{path:r,value:n});if(!this.solvedPath)throw(0,g.makeError)("Baobab.Cursor.".concat(e,": the dynamic path of the cursor cannot be solved."),{path:this.path});var o=this.solvedPath.concat(r);return this.tree.update(o,{type:e,value:n})}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=n(e("emmett")),v=e("./monkey"),m=n(e("./type")),g=e("./helpers"),b=function(e){function t(e,r,n){var o;i(this,t),o=u(this,c(t).call(this)),r=r||[],o._identity="[object Cursor]",o._archive=null,o.tree=e,o.path=r,o.hash=n,o.state={killed:!1,recording:!1,undoing:!1},o._dynamicPath=m.default.dynamicPath(o.path),o._monkeyPath=m.default.monkeyPath(o.tree._monkeys,o.path),o._dynamicPath?o.solvedPath=(0,g.getIn)(o.tree._data,o.path).solvedPath:o.solvedPath=o.path,o._writeHandler=function(e){var t=e.data;!o.state.killed&&(0,g.solveUpdate)([t.path],o._getComparedPaths())&&(o.solvedPath=(0,g.getIn)(o.tree._data,o.path).solvedPath)};var a=function(e){var t=l(o),r={get previousData(){return(0,g.getIn)(e,t.solvedPath).data},get currentData(){return t.get()}};return o.state.recording&&!o.state.undoing&&o.archive.add(r.previousData),o.state.undoing=!1,o.emit("update",r)};o._updateHandler=function(e){if(!o.state.killed){var t=e.data,r=t.paths,n=t.previousData,i=a.bind(l(o),n),s=o._getComparedPaths();return(0,g.solveUpdate)(r,s)?i():void 0}};var s=!1;return o._lazyBind=function(){if(!s)return s=!0,o._dynamicPath&&o.tree.on("write",o._writeHandler),o.tree.on("update",o._updateHandler)},o._dynamicPath?o._lazyBind():(o.on=(0,g.before)(o._lazyBind,o.on.bind(l(o))),o.once=(0,g.before)(o._lazyBind,o.once.bind(l(o)))),o}return h(t,e),s(t,[{key:"_getComparedPaths",value:function(){var e=this._monkeyPath?(0,g.getIn)(this.tree._monkeys,this._monkeyPath).data.relatedPaths():[];return[this.solvedPath].concat(e)}},{key:"isRoot",value:function(){return!this.path.length}},{key:"isLeaf",value:function(){return m.default.primitive(this._get().data)}},{key:"isBranch",value:function(){return!this.isRoot()&&!this.isLeaf()}},{key:"root",value:function(){return this.tree.select()}},{key:"select",value:function(e){return arguments.length>1&&(e=(0,g.arrayFrom)(arguments)),this.tree.select(this.path.concat(e))}},{key:"up",value:function(){return this.isRoot()?null:this.tree.select(this.path.slice(0,-1))}},{key:"down",value:function(){if(d("down",this.solvedPath),!(this._get().data instanceof Array))throw Error("Baobab.Cursor.down: cannot go down on a non-list type.");return this.tree.select(this.solvedPath.concat(0))}},{key:"left",value:function(){d("left",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.left: cannot go left on a non-list type.");return e?this.tree.select(this.solvedPath.slice(0,-1).concat(e-1)):null}},{key:"right",value:function(){d("right",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.right: cannot go right on a non-list type.");return e+1===this.up()._get().data.length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(e+1))}},{key:"leftmost",value:function(){d("leftmost",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))}},{key:"rightmost",value:function(){d("rightmost",this.solvedPath);var e=+this.solvedPath[this.solvedPath.length-1];if(isNaN(e))throw Error("Baobab.Cursor.rightmost: cannot go right on a non-list type.");var t=this.up()._get().data;return this.tree.select(this.solvedPath.slice(0,-1).concat(t.length-1))}},{key:"map",value:function(e,t){d("map",this.solvedPath);var r=this._get().data,n=arguments.length;if(!m.default.array(r))throw Error("baobab.Cursor.map: cannot map a non-list type.");return r.map(function(o,i){return e.call(n>1?t:this,this.select(i),i,r)},this)}},{key:"_get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!m.default.path(e))throw(0,g.makeError)("Baobab.Cursor.getters: invalid path.",{path:e});return this.solvedPath?(0,g.getIn)(this.tree._data,this.solvedPath.concat(e)):{data:void 0,solvedPath:null,exists:!1}}},{key:"exists",value:function(e){return e=(0,g.coercePath)(e),arguments.length>1&&(e=(0,g.arrayFrom)(arguments)),this._get(e).exists}},{key:"get",value:function(e){e=(0,g.coercePath)(e),arguments.length>1&&(e=(0,g.arrayFrom)(arguments));var t=this._get(e),r=t.data,n=t.solvedPath;return this.tree.emit("get",{data:r,solvedPath:n,path:this.path.concat(e)}),r}},{key:"clone",value:function(){var e=this.get.apply(this,arguments);return(0,g.shallowClone)(e)}},{key:"deepClone",value:function(){var e=this.get.apply(this,arguments);return(0,g.deepClone)(e)}},{key:"serialize",value:function(e){if(e=(0,g.coercePath)(e),arguments.length>1&&(e=(0,g.arrayFrom)(arguments)),!m.default.path(e))throw(0,g.makeError)("Baobab.Cursor.getters: invalid path.",{path:e});if(this.solvedPath){var t=this.solvedPath.concat(e),r=(0,g.deepClone)((0,g.getIn)(this.tree._data,t).data),n=(0,g.getIn)(this.tree._monkeys,t).data;return function e(t,r){if(m.default.object(r)&&m.default.object(t))for(var n in r)r[n]instanceof v.Monkey?delete t[n]:e(t[n],r[n])}(r,n),r}}},{key:"project",value:function(e){if(m.default.object(e)){var t={};for(var r in e)t[r]=this.get(e[r]);return t}if(m.default.array(e)){for(var n=[],o=0,i=e.length;o<i;o++)n.push(this.get(e[o]));return n}throw(0,g.makeError)("Baobab.Cursor.project: wrong projection.",{projection:e})}},{key:"startRecording",value:function(e){if((e=e||1/0)<1)throw(0,g.makeError)("Baobab.Cursor.startRecording: invalid max records.",{value:e});return this.state.recording=!0,this.archive?this:(this._lazyBind(),this.archive=new g.Archive(e),this)}},{key:"stopRecording",value:function(){return this.state.recording=!1,this}},{key:"undo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.state.recording)throw new Error("Baobab.Cursor.undo: cursor is not recording.");var t=this.archive.back(e);if(!t)throw Error("Baobab.Cursor.undo: cannot find a relevant record.");return this.state.undoing=!0,this.set(t),this}},{key:"hasHistory",value:function(){return!(!this.archive||!this.archive.get().length)}},{key:"getHistory",value:function(){return this.archive?this.archive.get():[]}},{key:"clearHistory",value:function(){return this.archive&&this.archive.clear(),this}},{key:"release",value:function(){this._dynamicPath&&this.tree.off("write",this._writeHandler),this.tree.off("update",this._updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill(),this.state.killed=!0}},{key:"toJSON",value:function(){return this.serialize()}},{key:"toString",value:function(){return this._identity}}]),t}(y.default);r.default=b,"function"==typeof Symbol&&void 0!==Symbol.iterator&&(b.prototype[Symbol.iterator]=function(){var e=this._get().data;if(!m.default.array(e))throw Error("baobab.Cursor.@@iterate: cannot iterate a non-list type.");var t=0,r=this,n=e.length;return{next:function(){return t<n?{value:r.select(t++)}:{done:!0}}}});var w={unset:!0,pop:!0,shift:!0};p("set"),p("unset"),p("apply",m.default.function),p("push"),p("concat",m.default.array),p("unshift"),p("pop"),p("shift"),p("splice",m.default.splicer),p("merge",m.default.object),p("deepMerge",m.default.object)},{"./helpers":3,"./monkey":4,"./type":5,emmett:14}],3:[function(e,t,r){(function(t){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){var r,n;for(r=0,n=e.length;r<n;r++)if(t(e[r]))return r;return-1}function u(e){var t,r,n=new Array(e.length);for(t=0,r=e.length;t<r;t++)n[t]=e[t];return n}function c(e){return u(e)}function l(e,t){return function(){e.apply(null,arguments),t.apply(null,arguments)}}function h(e){var t=e.source,r="";return e.global&&(r+="g"),e.multiline&&(r+="m"),e.ignoreCase&&(r+="i"),e.sticky&&(r+="y"),e.unicode&&(r+="u"),new RegExp(t,r)}function f(e,r){if(!r||"object"!==n(r)||r instanceof Error||r instanceof j.MonkeyDefinition||r instanceof j.Monkey||"ArrayBuffer"in t&&r instanceof ArrayBuffer)return r;if(P.default.array(r)){if(e){for(var o=new Array(r.length),i=0,a=r.length;i<a;i++)o[i]=f(!0,r[i]);return o}return u(r)}if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp)return h(r);if(P.default.object(r)){for(var s={},c=Object.getOwnPropertyNames(r),l=0,d=c.length;l<d;l++){var p=c[l],y=Object.getOwnPropertyDescriptor(r,p);!0===y.enumerable?y.get&&y.get.isLazyGetter?Object.defineProperty(s,p,{get:y.get,enumerable:!0,configurable:!0}):s[p]=e?f(!0,r[p]):r[p]:!1===y.enumerable&&Object.defineProperty(s,p,{value:e?f(!0,y.value):y.value,enumerable:!1,writable:!0,configurable:!0})}return s}return r}function d(e){return e||0===e||""===e?e:[]}function p(e,t){var r,n=!0;if(!e)return!1;for(r in t)if(P.default.object(t[r]))n=n&&p(e[r],t[r]);else if(P.default.array(t[r]))n=n&&!!~t[r].indexOf(e[r]);else if(e[r]!==t[r])return!1;return n}function y(e,t){if(!("object"!==n(t)||null===t||t instanceof j.Monkey)&&(Object.freeze(t),e))if(Array.isArray(t)){var r,o;for(r=0,o=t.length;r<o;r++)A(t[r])}else{var i,a;for(a in t)P.default.lazyGetter(t,a)||(i=t[a])&&O.call(t,a)&&"object"===n(i)&&!Object.isFrozen(i)&&A(i)}}function v(e,t){if(!t)return C;var r,o,i,a=[],u=!0,c=e;for(o=0,i=t.length;o<i;o++){if(!c)return{data:void 0,solvedPath:a.concat(t.slice(o)),exists:!1};if("function"==typeof t[o]){if(!P.default.array(c))return C;if(!~(r=s(c,t[o])))return C;a.push(r),c=c[r]}else if("object"===n(t[o])){if(!P.default.array(c))return C;if(!~(r=s(c,function(e){return p(e,t[o])})))return C;a.push(r),c=c[r]}else a.push(t[o]),u="object"===n(c)&&t[o]in c,c=c[t[o]]}return{data:c,solvedPath:a,exists:u}}function m(e,t){var r=new Error(e);for(var n in t)r[n]=t[n];return r}function g(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o,i,a,s,u=r[0];for(i=1,a=r.length;i<a;i++){o=r[i];for(s in o)!e||!P.default.object(o[s])||o[s]instanceof j.Monkey?u[s]=o[s]:u[s]=g(!0,u[s]||{},o[s])}return u}function b(e){return"λ"+e.map(function(e){return P.default.function(e)||P.default.object(e)?"#".concat(I(),"#"):e}).join("λ")}function w(e,t){var r=[];t=[].concat(t);for(var n=0,o=t.length;n<o;n++){var i=t[n];"."===i?n||(r=e.slice(0)):".."===i?r=(n?r:e).slice(0,-1):r.push(i)}return r}function _(e,t){var r,n,o,i,a,s,u,c;for(r=0,i=e.length;r<i;r++){if(u=e[r],!u.length)return!0;for(n=0,a=t.length;n<a;n++){if(!(c=t[n])||!c.length)return!0;for(o=0,s=c.length;o<s&&c[o]==u[o];o++)if(o+1===s||o+1===u.length)return!0}}return!1}function k(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];if(void 0===r&&2===arguments.length)r=e.length-t;else if(null===r||void 0===r)r=0;else if(isNaN(+r))throw new Error("argument nb ".concat(r," can not be parsed into a number!"));return r=Math.max(0,r),P.default.function(t)&&(t=s(e,t)),P.default.object(t)&&(t=s(e,function(e){return p(e,t)})),t>=0?e.slice(0,t).concat(o).concat(e.slice(t+r)):e.slice(0,e.length+t).concat(o).concat(e.slice(e.length+t+r))}Object.defineProperty(r,"__esModule",{value:!0}),r.arrayFrom=c,r.before=l,r.coercePath=d,r.getIn=v,r.makeError=m,r.hashPath=b,r.solveRelativePath=w,r.solveUpdate=_,r.splice=k,r.uniqid=r.deepMerge=r.shallowMerge=r.deepFreeze=r.freeze=r.deepClone=r.shallowClone=r.Archive=void 0;var j=e("./monkey"),P=function(e){return e&&e.__esModule?e:{default:e}}(e("./type")),O={}.hasOwnProperty,E=function(){function e(t){o(this,e),this.size=t,this.records=[]}return a(e,[{key:"get",value:function(){return this.records}},{key:"add",value:function(e){return this.records.unshift(e),this.records.length>this.size&&(this.records.length=this.size),this}},{key:"clear",value:function(){return this.records=[],this}},{key:"back",value:function(e){var t=this.records[e-1];return t&&(this.records=this.records.slice(e)),t}}]),e}();r.Archive=E;var x=f.bind(null,!1),S=f.bind(null,!0);r.deepClone=S,r.shallowClone=x;var M=y.bind(null,!1),A=y.bind(null,!0);r.deepFreeze=A,r.freeze=M;var C={data:void 0,solvedPath:null,exists:!1},D=g.bind(null,!1),N=g.bind(null,!0);r.deepMerge=N,r.shallowMerge=D;var I=function(){var e=0;return function(){return e++}}();r.uniqid=I}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./monkey":4,"./type":5}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Monkey=r.MonkeyDefinition=void 0;var s=n(e("./type")),u=n(e("./update")),c=e("./helpers"),l=function e(t){var r=this;a(this,e);var n=s.default.monkeyDefinition(t);if(!n)throw(0,c.makeError)("Baobab.monkey: invalid definition.",{definition:t});if(this.type=n,"object"===this.type)this.getter=t.get,this.projection=t.cursors||{},this.paths=Object.keys(this.projection).map(function(e){return r.projection[e]}),this.options=t.options||{};else{var o=1,i={};s.default.object(t[t.length-1])&&(o++,i=t[t.length-1]),this.getter=t[t.length-o],this.projection=t.slice(0,-o),this.paths=this.projection,this.options=i}this.paths=this.paths.map(function(e){return[].concat(e)}),this.hasDynamicPaths=this.paths.some(s.default.dynamicPath)};r.MonkeyDefinition=l;var h=function(){function e(t,r,n){var o=this;a(this,e),this.tree=t,this.path=r,this.definition=n;var i=n.projection,s=c.solveRelativePath.bind(null,r.slice(0,-1));"object"===n.type?(this.projection=Object.keys(i).reduce(function(e,t){return e[t]=s(i[t]),e},{}),this.depPaths=Object.keys(this.projection).map(function(e){return o.projection[e]})):(this.projection=i.map(s),this.depPaths=this.projection),this.state={killed:!1},this.writeListener=function(e){var t=e.data.path;if(!o.state.killed){(0,c.solveUpdate)([t],o.relatedPaths())&&o.update()}},this.recursiveListener=function(e){var t=e.data,r=t.monkey,n=t.path;if(!o.state.killed&&o!==r){(0,c.solveUpdate)([n],o.relatedPaths(!1))&&o.update()}},this.tree.on("write",this.writeListener),this.tree.on("_monkey",this.recursiveListener),this.update()}return i(e,[{key:"relatedPaths",value:function(){var e,t=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e=this.definition.hasDynamicPaths?this.depPaths.map(function(e){return(0,c.getIn)(t.tree._data,e).solvedPath}):this.depPaths,r&&this.depPaths.some(function(e){return!!s.default.monkeyPath(t.tree._monkeys,e)})?e.reduce(function(e,r){var n=s.default.monkeyPath(t.tree._monkeys,r);if(!n)return e.concat([r]);var o=(0,c.getIn)(t.tree._monkeys,n).data;return e.concat(o.relatedPaths())},[]):e}},{key:"update",value:function(){var e=this,t=this.tree.project(this.projection),r=function(t,r,n){var o=null,i=!1;return function(){if(!i){o=r.getter.apply(t,"object"===r.type?[n]:n),t.options.immutable&&!1!==r.options.immutable&&(0,c.deepFreeze)(o);var a=(0,c.hashPath)(e.path);t._affectedPathsIndex[a]=!0,i=!0}return o}}(this.tree,this.definition,t);if(r.isLazyGetter=!0,this.tree.options.lazyMonkeys)this.tree._data=(0,u.default)(this.tree._data,this.path,{type:"monkey",value:r},this.tree.options).data;else{var n=(0,u.default)(this.tree._data,this.path,{type:"set",value:r(),options:{mutableLeaf:!this.definition.options.immutable}},this.tree.options);"data"in n&&(this.tree._data=n.data)}return this.tree.emit("_monkey",{monkey:this,path:this.path}),this}},{key:"release",value:function(){this.tree.off("write",this.writeListener),this.tree.off("_monkey",this.recursiveListener),this.state.killed=!0,delete this.projection,delete this.depPaths,delete this.tree}}]),e}();r.Monkey=h},{"./helpers":3,"./type":5,"./update":6}],5:[function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return t.some(function(t){return a[t](e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("./monkey"),a={};a.array=function(e){return Array.isArray(e)},a.object=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!("function"==typeof Map&&e instanceof Map)&&!("function"==typeof Set&&e instanceof Set)},a.string=function(e){return"string"==typeof e},a.number=function(e){return"number"==typeof e},a.function=function(e){return"function"==typeof e},a.primitive=function(e){return e!==Object(e)},a.splicer=function(e){return!(!a.array(e)||e.length<1)&&(!(e.length>1&&isNaN(+e[1]))&&o(e[0],["number","function","object"]))};var s=["string","number","function","object"];a.path=function(e){return!(!e&&0!==e&&""!==e)&&[].concat(e).every(function(e){return o(e,s)})},a.dynamicPath=function(e){return e.some(function(e){return a.function(e)||a.object(e)})},a.monkeyPath=function(e,t){var r,o,a=[],s=e;for(r=0,o=t.length;r<o;r++){if(a.push(t[r]),"object"!==n(s))return null;if((s=s[t[r]])instanceof i.Monkey)return a}return null},a.lazyGetter=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return r&&r.get&&!0===r.get.isLazyGetter},a.monkeyDefinition=function(e){if(a.object(e))return a.function(e.get)&&(!e.cursors||a.object(e.cursors)&&Object.keys(e.cursors).every(function(t){return a.path(e.cursors[t])}))?"object":null;if(a.array(e)){var t=1;return a.object(e[e.length-1])&&t++,a.function(e[e.length-t])&&e.slice(0,-t).every(function(e){return a.path(e)})?"array":null}return null},a.watcherMapping=function(e){return a.object(e)&&Object.keys(e).every(function(t){return a.path(e[t])})};var u=["set","apply","push","unshift","concat","pop","shift","deepMerge","merge","splice","unset"];a.operationType=function(e){return"string"==typeof e&&!!~u.indexOf(e)};var c=a;r.default=c},{"./monkey":4}],6:[function(e,t,r){"use strict";function n(e){return a(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e,t,r){return(0,l.makeError)('Baobab.update: cannot apply the "'.concat(e,'" on ')+"a non ".concat(t," (path: /").concat(r.join("/"),")."),{path:r})}function u(e,t,r){var o,i,a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=r.type,f=r.value,d=r.options,p=void 0===d?{}:d,y={root:e},v=["root"].concat(n(t)),m=[],g=y;for(o=0,i=v.length;o<i;o++){if(a=v[o],o>0&&m.push(a),o===i-1){if("set"===h){if(u.pure&&g[a]===f)return{node:g[a]};c.default.lazyGetter(g,a)?Object.defineProperty(g,a,{value:f,enumerable:!0,configurable:!0}):u.persistent&&!p.mutableLeaf?g[a]=(0,l.shallowClone)(f):g[a]=f}else if("monkey"===h)Object.defineProperty(g,a,{get:f,enumerable:!0,configurable:!0});else if("apply"===h){var b=f(g[a]);if(u.pure&&g[a]===b)return{node:g[a]};c.default.lazyGetter(g,a)?Object.defineProperty(g,a,{value:b,enumerable:!0,configurable:!0}):u.persistent?g[a]=(0,l.shallowClone)(b):g[a]=b}else if("push"===h){if(!c.default.array(g[a]))throw s("push","array",m);u.persistent?g[a]=g[a].concat([f]):g[a].push(f)}else if("unshift"===h){if(!c.default.array(g[a]))throw s("unshift","array",m);u.persistent?g[a]=[f].concat(g[a]):g[a].unshift(f)}else if("concat"===h){if(!c.default.array(g[a]))throw s("concat","array",m);u.persistent?g[a]=g[a].concat(f):g[a].push.apply(g[a],f)}else if("splice"===h){if(!c.default.array(g[a]))throw s("splice","array",m);u.persistent?g[a]=l.splice.apply(null,[g[a]].concat(f)):g[a].splice.apply(g[a],f)}else if("pop"===h){if(!c.default.array(g[a]))throw s("pop","array",m);u.persistent?g[a]=(0,l.splice)(g[a],-1,1):g[a].pop()}else if("shift"===h){if(!c.default.array(g[a]))throw s("shift","array",m);u.persistent?g[a]=(0,l.splice)(g[a],0,1):g[a].shift()}else if("unset"===h)c.default.object(g)?delete g[a]:c.default.array(g)&&g.splice(a,1);else if("merge"===h){if(!c.default.object(g[a]))throw s("merge","object",m);u.persistent?g[a]=(0,l.shallowMerge)({},g[a],f):g[a]=(0,l.shallowMerge)(g[a],f)}else if("deepMerge"===h){if(!c.default.object(g[a]))throw s("deepMerge","object",m);u.persistent?g[a]=(0,l.deepMerge)({},g[a],f):g[a]=(0,l.deepMerge)(g[a],f)}u.immutable&&!p.mutableLeaf&&(0,l.deepFreeze)(g);break}c.default.primitive(g[a])?g[a]={}:u.persistent&&(g[a]=(0,l.shallowClone)(g[a])),u.immutable&&i>0&&(0,l.freeze)(g),g=g[a]}return c.default.lazyGetter(g,a)?{data:y.root}:{data:y.root,node:g[a]}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var c=function(e){return e&&e.__esModule?e:{default:e}}(e("./type")),l=e("./helpers")},{"./helpers":3,"./type":5}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e
}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=n(e("emmett")),p=n(e("./cursor")),y=n(e("./type")),v=e("./helpers"),m=function(e){function t(e,r){var n;return i(this,t),n=u(this,l(t).call(this)),n.tree=e,n.mapping=null,n.state={killed:!1},n.refresh(r),n.handler=function(e){if(!n.state.killed){var t=n.getWatchedPaths();return(0,v.solveUpdate)(e.data.paths,t)?n.emit("update"):void 0}},n.tree.on("update",n.handler),n}return h(t,e),s(t,[{key:"getWatchedPaths",value:function(){var e=this;return Object.keys(this.mapping).map(function(t){var r=e.mapping[t];return r instanceof p.default?r.solvedPath:e.mapping[t]}).reduce(function(t,r){if(r=[].concat(r),y.default.dynamicPath(r)&&(r=(0,v.getIn)(e.tree._data,r).solvedPath),!r)return t;var n=y.default.monkeyPath(e.tree._monkeys,r);return n?t.concat((0,v.getIn)(e.tree._monkeys,n).data.relatedPaths()):t.concat([r])},[])}},{key:"getCursors",value:function(){var e=this,t={};return Object.keys(this.mapping).forEach(function(r){var n=e.mapping[r];n instanceof p.default?t[r]=n:t[r]=e.tree.select(n)}),t}},{key:"refresh",value:function(e){if(!y.default.watcherMapping(e))throw(0,v.makeError)("Baobab.watch: invalid mapping.",{mapping:e});this.mapping=e;var t={};for(var r in e)t[r]=e[r]instanceof p.default?e[r].path:e[r];this.get=this.tree.project.bind(this.tree,t)}},{key:"release",value:function(){this.tree.off("update",this.handler),this.state.killed=!0,this.kill()}}]),t}(d.default);r.default=m},{"./cursor":2,"./helpers":3,"./type":5,emmett:14}],8:[function(e,t,r){(function(n){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function u(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r=t.exports=e("./debug"),r.log=a,r.formatArgs=i,r.save=s,r.load=u,r.useColors=o,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(u())}).call(this,e("_process"))},{"./debug":9,_process:16}],9:[function(e,t,r){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function o(e){function t(){if(t.enabled){var e=t,n=+new Date,o=n-(c||n);e.diff=o,e.prev=c,e.curr=n,c=n;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=r.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;s++;var o=r.formatters[n];if("function"==typeof o){var a=i[s];t=o.call(e,a),i.splice(s,1),s--}return t}),r.formatArgs.call(e,i);(t.log||r.log||console.log.bind(console)).apply(e,i)}}return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),"function"==typeof r.init&&r.init(t),t}function i(e){r.save(e),r.names=[],r.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function a(){r.enable("")}function s(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=o.debug=o.default=o,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=e("ms"),r.names=[],r.skips=[],r.formatters={};var c},{ms:15}],10:[function(e,t,r){t.exports=e("./lib/Dispatcher")},{"./lib/Dispatcher":12}],11:[function(e,t,r){"use strict";function n(e,t){this.name=e,this.payload=t,this._handlers=null,this._isExecuting=!1,this._isCompleted=null}var o=e("debug")("Dispatchr:Action");n.prototype.getStoreName=function(e){return"string"==typeof e?e:e.storeName},n.prototype.execute=function(e){if(this._isExecuting)throw new Error("Action is already dispatched");var t=this;this._handlers=e,this._isExecuting=!0,this._isCompleted={},Object.keys(e).forEach(function(e){t._callHandler(e)})},n.prototype._callHandler=function(e){var t=this,r=t._handlers[e];if(!r)throw new Error(e+" does not have a handler for action "+t.name);t._isCompleted[e]||(t._isCompleted[e]=!1,o("executing handler for "+e),r(t.payload,t.name),t._isCompleted[e]=!0)},n.prototype.waitFor=function(e,t){var r=this;if(!r._isExecuting)throw new Error("waitFor called even though there is no action being executed!");Array.isArray(e)||(e=[e]),o("waiting on "+e.join(", ")),e.forEach(function(e){e=r.getStoreName(e),r._handlers[e]&&r._callHandler(e)}),t()},t.exports=n},{debug:8}],12:[function(e,t,r){(function(r){"use strict";function n(e){e=e||{},e.stores=e.stores||[],this.stores={},this.handlers={},this.handlers[o]=[],this.hasWarnedAboutNameProperty=!1,e.stores.forEach(function(e){this.registerStore(e)},this)}var o=(e("./Action"),"default"),i=e("./DispatcherContext");n.prototype.createContext=function(e){return new i(this,e)},n.prototype.registerStore=function(e){if("function"!=typeof e)throw new Error("registerStore requires a constructor as first parameter");var t=this.getStoreName(e);if(!t)throw new Error("Store is required to have a `storeName` property.");if(this.stores[t]){if(this.stores[t]===e)return;throw new Error("Store with name `"+t+"` has already been registered.")}this.stores[t]=e,e.handlers&&Object.keys(e.handlers).forEach(function(r){var n=e.handlers[r];this._registerHandler(r,t,n)},this)},n.prototype.isRegistered=function(e){var t=this.getStoreName(e),r=this.stores[t];return!!r&&("function"!=typeof e||e===r)},n.prototype.getStoreName=function(e){return"string"==typeof e?e:e.storeName?e.storeName:("production"!==r.env.NODE_ENV&&e.name&&!this.hasWarnedAboutNameProperty&&(console.warn("A store has been registered that relies on the constructor's name property. This name may change when you minify your stores during build time and could break string references to your store. It is advised that you add a static `storeName` property to your store to ensure the store name does not change during your build."),this.hasWarnedAboutNameProperty=!0),e.name)},n.prototype._registerHandler=function(e,t,r){return this.handlers[e]=this.handlers[e]||[],this.handlers[e].push({name:this.getStoreName(t),handler:r}),this.handlers.length-1},t.exports={createDispatcher:function(e){return new n(e)}}}).call(this,e("_process"))},{"./Action":11,"./DispatcherContext":13,_process:16}],13:[function(e,t,r){"use strict";function n(e,t){this.dispatcher=e,this.storeInstances={},this.currentAction=null,this.dispatcherInterface={getContext:function(){return t},getStore:this.getStore.bind(this),waitFor:this.waitFor.bind(this)}}var o=e("./Action"),i=e("debug")("Dispatchr:DispatcherContext");n.prototype.getStore=function(e){var t=this.dispatcher.getStoreName(e);if(!this.storeInstances[t]){if(!this.dispatcher.stores[t])throw new Error("Store "+t+" was not registered.");this.storeInstances[t]=new this.dispatcher.stores[t](this.dispatcherInterface)}return this.storeInstances[t]},n.prototype.dispatch=function(e,t){if(!e)throw new Error("actionName parameter `"+e+"` is invalid.");if(this.currentAction)throw new Error("Cannot call dispatch while another dispatch is executing. Attempted to execute '"+e+"' but '"+this.currentAction.name+"' is already executing.");var r=this.dispatcher.handlers[e]||[],n=this.dispatcher.handlers.default||[];if(!r.length&&!n.length)return void i(e+" does not have any registered handlers");i("dispatching "+e,t),this.currentAction=new o(e,t);var a=this,s=r.concat(n),u={};try{s.forEach(function(e){if(!u[e.name]){var t=a.getStore(e.name);if("function"==typeof e.handler)u[e.name]=e.handler.bind(t);else{if(!t[e.handler])throw new Error(e.name+" does not have a method called "+e.handler);u[e.name]=t[e.handler].bind(t)}}}),this.currentAction.execute(u)}catch(e){throw e}finally{i("finished "+e),this.currentAction=null}},n.prototype.dehydrate=function(){var e=this,t={};return Object.keys(e.storeInstances).forEach(function(r){var n=e.storeInstances[r];!n.dehydrate||n.shouldDehydrate&&!n.shouldDehydrate()||(t[r]=n.dehydrate())}),{stores:t}},n.prototype.rehydrate=function(e){var t=this;e.stores&&Object.keys(e.stores).forEach(function(r){var n=e.stores[r],o=t.getStore(r);o.rehydrate&&o.rehydrate(n)})},n.prototype.waitFor=function(e,t){if(!this.currentAction)throw new Error("waitFor called even though there is no action dispatching");this.currentAction.waitFor(e,t)},t.exports=n},{"./Action":11,debug:8}],14:[function(e,t,r){function n(e,t){var r,n={};for(r in e)n[r]=e[r];for(r in t)n[r]=t[r];return n}function o(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)&&!(e instanceof RegExp)}function i(e,t,r){var n,o,i,a;for(o in e)t.call(r||null,o,e[o]);if(Object.getOwnPropertySymbols)for(n=Object.getOwnPropertySymbols(e),i=0,a=n.length;i<a;i++)t.call(r||null,n[i],e[n[i]])}function a(e,t){e=e||[];var r,n,o=[];for(n=0,r=e.length;n<r;n++)e[n].fn!==t&&o.push(e[n]);return o}var s={once:"boolean",scope:"object"},u=0,c=function(){this._enabled=!0,this.unbindAll()};c.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},c.prototype.on=function(e,t,r){var n,a,c,l,h,f,d;if(o(e))return i(e,function(e,r){this.on(e,r,t)},this),this;for("function"==typeof e&&(r=t,t=e,e=null),h=[].concat(e),n=0,a=h.length;n<a;n++){if(l=h[n],d={order:u++,fn:t},"string"==typeof l||"symbol"==typeof l)this._handlers[l]||(this._handlers[l]=[]),f=this._handlers[l],d.type=l;else if(l instanceof RegExp)f=this._handlersComplex,d.pattern=l;else{if(null!==l)throw Error("Emitter.on: invalid event.");f=this._handlersAll}for(c in r||{})s[c]&&(d[c]=r[c]);f.push(d)}return this},c.prototype.once=function(){var e=Array.prototype.slice.call(arguments),t=e.length-1;return o(e[t])&&e.length>1?e[t]=n(e[t],{once:!0}):e.push({once:!0}),this.on.apply(this,e)},c.prototype.off=function(e,t){var r,n,s,u;if(1===arguments.length&&"function"==typeof e){t=arguments[0];var c=Object.keys(this._handlers).concat(Object.getOwnPropertySymbols(this._handlers));for(r=0;r<c.length;r++)s=c[r],this._handlers[s]=a(this._handlers[s],t),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=a(this._handlersAll,t),this._handlersComplex=a(this._handlersComplex,t)}else if(1!==arguments.length||"string"!=typeof e&&"symbol"!=typeof e)if(2===arguments.length){var l=[].concat(e);for(r=0,n=l.length;r<n;r++)u=l[r],this._handlers[u]=a(this._handlers[u],t),0===(this._handlers[u]||[]).length&&delete this._handlers[u]}else o(e)&&i(e,this.off,this);else delete this._handlers[e];return this},c.prototype.listeners=function(e){var t,r,n,o=this._handlersAll||[],i=!1;if(!e)throw Error("Emitter.listeners: no event provided.");for(o=o.concat(this._handlers[e]||[]),r=0,n=this._handlersComplex.length;r<n;r++)t=this._handlersComplex[r],"string"==typeof e&&~e.search(t.pattern)&&(i=!0,o.push(t));return this._handlersAll.length||i?o.sort(function(e,t){return e.order-t.order}):o.slice(0)},c.prototype.emit=function(e,t){if(!this._enabled)return this;if(o(e))return i(e,this.emit,this),this;var r,n,a,s,u,c,l,h,f=[].concat(e),d=[];for(u=0,l=f.length;u<l;u++){for(a=this.listeners(f[u]),c=0,h=a.length;c<h;c++)s=a[c],r={type:f[u],target:this},arguments.length>1&&(r.data=t),s.fn.call("scope"in s?s.scope:this,r),s.once&&d.push(s);for(c=d.length-1;c>=0;c--){n=d[c].type?this._handlers[d[c].type]:d[c].pattern?this._handlersComplex:this._handlersAll;var p=n.indexOf(d[c]);-1!==p&&n.splice(p,1)}}return this},c.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1,this.unbindAll=this.on=this.once=this.off=this.emit=this.listeners=Function.prototype},c.prototype.disable=function(){return this._enabled=!1,this},c.prototype.enable=function(){return this._enabled=!0,this},c.version="3.2.0",t.exports=c},{}],15:[function(e,t,r){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=u?Math.round(e/u)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,l,"day")||a(e,c,"hour")||a(e,u,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,u=60*s,c=60*u,l=24*c,h=365.25*l;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&!1===isNaN(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],16:[function(e,t,r){function n(){}var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){r.shift()()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],17:[function(e,t,r){(function(r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=arguments[3],o=function(t){if(this.dispatcher=t,this.waitFor=function(e,t){if(e=Array.isArray(e)?e:[e],!n.areStoresRegistered(e))throw new Error("Waiting for stores that are not injected into Angular yet, "+e.join(", ")+". Be sure to inject stores before waiting for them");this.dispatcher.waitFor(e,t.bind(this))},!this.initialize)throw new Error("Store "+e+" does not have an initialize method which is is necessary to set the initial state");this.initialize()};return o.handlers=t.handlers,o.storeName=e,o.prototype.immutable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.__tree?this.__tree.set(e):this.__tree=new i.default(e,s.extend({},r,t)),this.__tree},o.prototype.monkey=i.default.monkey,Object.keys(t).forEach(function(e){o.prototype[e]=t[e]}),o}var o=e("baobab"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=e("dispatchr"),s=r.angular||e("angular")&&r.angular,u=s.module,c=[],l=!1,h=!0,f=function(e){this.stores=[],this.dispatcherInstance=(0,a.createDispatcher)(),this.dispatcher=this.dispatcherInstance.createContext(),this.dispatch=function(){c.length&&console.warn("There are still stores not injected: "+c.join(",")+". Make sure to manually inject all stores before running any dispatches or set autoInjectStores to true."),this.dispatcher.dispatch.apply(this.dispatcher,arguments)},this.createStore=function(t,r){var o=n(t,r,e,this),i=void 0;if(o.exports={},this.dispatcherInstance.registerStore(o),this.stores.push(o),!r.exports)throw new Error("You have to add an exports object to your store: "+t);return i=this.dispatcher.getStore(o),Object.keys(r.exports).forEach(function(e){var t=Object.getOwnPropertyDescriptor(r.exports,e);t.get?Object.defineProperty(o.exports,e,{enumerable:t.enumerable,configurable:t.configurable,get:function(){return t.get.apply(i)}}):(o.exports[e]=function(){return r.exports[e].apply(i,arguments)},r.exports[e]=r.exports[e].bind(i))}),o.exports},this.getStore=function(e){var t=this.stores.filter(function(t){return t.exports===e})[0];return this.dispatcher.getStore(t)},this.areStoresRegistered=function(e){var t=this.stores.map(function(e){return e.storeName});return e.every(function(e){return t.indexOf(e)>-1})},this.reset=function(){this.dispatcherInstance.stores={},this.dispatcherInstance.handlers={},this.stores=[],c=[]},this.Baobab=i.default};s.module=function(){var e=u.apply(s,arguments);return e.store=function(e,t){return c.push(e),this.factory(e,["$injector","flux",function(r,n){var o=r.invoke(t);return c.splice(c.indexOf(e),1),n.createStore(e,o)}]),this},e},s.module("flux",[]).provider("flux",function(){var e={};this.setImmutableDefaults=function(t){e=t},this.autoInjectStores=function(e){l=e},this.useEvalAsync=function(e){h=e},this.$get=[function(){return new f(e)}]}).run(["$rootScope","$injector","flux",function(e,t,r){s.mock&&r.reset(),!s.mock&&l&&t.invoke(c.concat(s.noop)),e.constructor.prototype.$listenTo=function(e,t,n){var o=this,i=void 0,a=r.getStore(e);if(!a.__tree)throw new Error("Store "+e.storeName+" has not defined state with this.immutable() which is required in order to use $listenTo");if(n?i=a.__tree.select(t):(n=t,i=a.__tree),h){var s=n;n=function(e){o.$evalAsync(function(){return s(e)})}}i.on("update",n),n({}),this.$on("$destroy",function(){return i.off("update",n)})}}]),t.exports="flux"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{angular:"angular",baobab:1,dispatchr:10}]},{},[17]);